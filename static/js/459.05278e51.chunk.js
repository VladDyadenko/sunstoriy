"use strict";(self.webpackChunksunstoriy=self.webpackChunksunstoriy||[]).push([[459],{8488:function(n,e,t){t.d(e,{Z:function(){return on}});var r,i,o,a,s,l,d,c,u,x,h,p=t(4165),g=t(5861),f=t(9439),m=t(2791),v=t(168),j=t(9256),Z=j.ZP.div(r||(r=(0,v.Z)(["\n  width: 100%;\n  padding: 10px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  border-radius: 8px;\n  gap: 20px;\n  margin-bottom: 8px;\n"]))),y=j.ZP.div(i||(i=(0,v.Z)(["\n  width: 100%;\n  max-width: 80%;\n  height: 100vh;\n  padding: 10px;\n"]))),b=t(2648),k=t(6355),w=t(9126),F=t(7309),P=t(283),D=j.ZP.p(o||(o=(0,v.Z)(["\n  text-align: center;\n  width: 100%;\n  text-align: center;\n  font-family: 'Roboto';\n  font-size: 20px;\n  font-weight: 400;\n  padding-bottom: 5px;\n\n  border-bottom: 2px solid var(--main-green);\n"]))),I=j.ZP.div(a||(a=(0,v.Z)(["\n  width: 100%;\n  max-width: 20%;\n  height: 100vh;\n  /* border: 2px solid var(--main-green); */\n  padding: 10px;\n"]))),C=(0,j.ZP)(F.ZP)(s||(s=(0,v.Z)(["\n  ","\n  background-color: var(--main-green);\n  &:hover {\n    background-color: var(--bg-main-color);\n  }\n\n  &:disabled {\n    background-color: var(--main-disabled);\n    color: var(--header-main-color);\n  }\n  & span {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    gap: 10px;\n  }\n  & svg {\n    width: 18px;\n    height: 18px;\n  }\n"])),P.G),S=t(7892),E=t.n(S),T=t(9106),B=t(5626),U=t(3827),M=t(8597),O=t(4424),z=t(2996),R=t(4086),q=t(3775),H=t(9434),L=t(4673),Y=j.ZP.div(l||(l=(0,v.Z)(["\n  margin-bottom: 20px;\n  text-align: center;\n  font-family: 'RobotoSlab';\n  font-weight: 500;\n  font-size: 14px;\n"]))),V=j.ZP.p(d||(d=(0,v.Z)(["\n  color: var(--main-green);\n"]))),G=t(184),_=function(n){var e=n.selectedPeriod,t=n.open,r=n.onCloseDrawerExpense,i=(0,R.Z)(),o=(0,f.Z)(i,1)[0],a=(0,m.useState)(null),s=(0,f.Z)(a,2),l=s[0],d=s[1],c=(0,H.I0)();return(0,G.jsx)(G.Fragment,{children:(0,G.jsx)(T.Z,{title:"\u041f\u043e\u0442\u043e\u0447\u043d\u0456 \u0432\u0438\u0442\u0440\u0430\u0442\u0438",placement:"right",width:340,onClose:r,open:t,children:(0,G.jsxs)(B.Z,{form:o,initialValues:{date:null,category:"salary",amount:null,paymentForm:"cash",bank:"",description:""},onFinish:function(){var n=(0,g.Z)((0,p.Z)().mark((function n(t){return(0,p.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return"cash"===t.paymentForm&&(t.bank=""),t.date=e,n.next=4,c((0,L.a)(t)).then((function(){r()}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),children:[(0,G.jsxs)(Y,{children:["\u0414\u0430\u0442\u0430 \u0432\u0438\u0442\u0440\u0430\u0442: ",(0,G.jsx)(V,{children:e})]}),(0,G.jsx)(B.Z.Item,{label:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044f \u0432\u0438\u0442\u0440\u0430\u0442",name:"category",rules:[{required:!0,message:"\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044e"}],children:(0,G.jsx)(U.Z,{children:q.Y9.map((function(n){return(0,G.jsx)(U.Z.Option,{value:n.category,children:n.title},n.category)}))})}),(0,G.jsx)(B.Z.Item,{rules:[{required:!0,message:"\u0412\u043d\u0435\u0441\u0456\u0442\u044c \u0441\u0443\u043c\u0443 \u0432\u0438\u0442\u0440\u0430\u0442"}],label:"\u0421\u0443\u043c\u0430",name:"amount",children:(0,G.jsx)(M.Z,{style:{width:"100%"},placeholder:"\u0412\u043a\u0430\u0436\u0456\u0442\u044c \u0441\u0443\u043c\u0443"})}),(0,G.jsx)(B.Z.Item,{label:"\u0424\u043e\u0440\u043c\u0430 \u043e\u043f\u043b\u0430\u0442\u0438",name:"paymentForm",onChange:function(n){"cash"===n.target.value&&o.setFieldsValue({bank:""})},children:(0,G.jsxs)(O.ZP.Group,{onChange:function(n){d(n.target.value),"cashless"!==n.target.value&&(o.setFieldsValue({bank:void 0}),o.resetFields(["bank","sum"]))},children:[(0,G.jsx)(O.ZP,{value:"cash",children:"\u0413\u043e\u0442\u0456\u0432\u043a\u0430"}),(0,G.jsx)(O.ZP,{value:"cashless",children:"\u0411\u0435\u0437\u0433\u043e\u0442\u0456\u0432\u043a\u043e\u0432\u0430"})]})}),(0,G.jsx)(B.Z.Item,{rules:"cashless"===l&&[{required:!0,message:"\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u0431\u0430\u043d\u043a"}],label:"\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u0431\u0430\u043d\u043a",name:"bank",style:{width:250},children:(0,G.jsxs)(U.Z,{children:[(0,G.jsx)(U.Z.Option,{value:"PrivatBank",children:"\u041f\u0440\u0438\u0432\u0430\u0442\u0411\u0430\u043d\u043a"}),(0,G.jsx)(U.Z.Option,{value:"MonoBank",children:"\u041c\u043e\u043d\u043e\u0431\u0430\u043d\u043a"})]})}),(0,G.jsx)(B.Z.Item,{label:"\u041e\u043f\u0438\u0441 \u0432\u0438\u0442\u0440\u0430\u0442",name:"description",children:(0,G.jsx)(z.Z.TextArea,{placeholder:"\u0417\u0430 \u043f\u043e\u0442\u0440\u0435\u0431\u043e\u044e \u0434\u043e\u0434\u0430\u0439\u0442\u0435 \u043e\u043f\u0438\u0441",autoSize:{minRows:1,maxRows:5}})}),(0,G.jsxs)("div",{style:{width:"100%",display:"flex",alignItems:"center",flexDirection:"column",gap:8},children:[(0,G.jsx)(F.ZP,{style:{width:"100%"},type:"primary",onClick:r,htmlType:"button",children:"\u0412\u0456\u0434\u043c\u0456\u043d\u0438\u0442\u0438"}),(0,G.jsx)(F.ZP,{style:{width:"100%"},type:"primary",htmlType:"submit",children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438 \u0437\u043c\u0456\u043d\u0438"})]})]})})})},A=t(1243),J=function(){var n=(0,g.Z)((0,p.Z)().mark((function n(e){var t,r;return(0,p.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,A.Z.get("/zvit/one_month_total",{params:e});case 3:return t=n.sent,r=t.data,n.abrupt("return",r);case 8:n.prev=8,n.t0=n.catch(0),console.error("\u274c Error:",n.t0.message);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}(),K=b.Z.RangePicker,N=function(){var n=E()(),e=(0,m.useState)("oneDay"),t=(0,f.Z)(e,2),r=t[0],i=t[1],o=(0,m.useState)(null),a=(0,f.Z)(o,2),s=a[0],l=a[1],d=(0,m.useState)((new Date).toISOString().split("T")[0]),c=(0,f.Z)(d,2),u=c[0],x=c[1],h=(0,m.useState)(!1),v=(0,f.Z)(h,2),j=v[0],Z=v[1];var y=function(){var n=(0,g.Z)((0,p.Z)().mark((function n(e){var t,r;return(0,p.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,n.next=5,J(e);case 5:t=n.sent,r=t.totalData,console.log("\u2705 totalProfit:",r),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(2),console.error("\u274c Error fetching total profit:",n.t0);case 13:case"end":return n.stop()}}),n,null,[[2,10]])})));return function(e){return n.apply(this,arguments)}}();return(0,G.jsx)(G.Fragment,{children:(0,G.jsxs)(I,{children:[(0,G.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:10},children:[(0,G.jsx)(D,{children:"\u0424\u0456\u043d\u0430\u043d\u0441\u043e\u0432\u0456 \u043f\u043e\u043a\u0430\u0437\u043d\u0438\u043a\u0438:"}),(0,G.jsx)(K,{defaultValue:[n,n],onChange:function(n,e){if(n&&0!==n.length){x(e[0]);var t=new Date(n[0].toDate()),r=new Date(n[1].toDate());t.setUTCHours(0,0,0,0),r.setUTCHours(23,59,59,999);var o=t.getUTCFullYear()===r.getUTCFullYear()&&t.getUTCMonth()===r.getUTCMonth()&&t.getUTCDate()===r.getUTCDate(),a={startDate:t.toISOString(),endDate:r.toISOString()};l(a),i(o?"oneDay":"period")}}}),(0,G.jsx)(C,{onClick:function(){return y(s)},disabled:"period"===r,children:"period"===r?(0,G.jsxs)(G.Fragment,{children:["\u0414\u043e\u0445\u043e\u0434\u0438 \u0437\u0430 \u0434\u0435\u043d\u044c ",(0,G.jsx)(k.iE3,{})]}):(0,G.jsxs)(G.Fragment,{children:["\u0414\u043e\u0445\u043e\u0434\u0438 \u0437\u0430 \u0434\u0435\u043d\u044c ",(0,G.jsx)(w.U2w,{})]})}),(0,G.jsx)(C,{disabled:"period"===r,children:"period"===r?(0,G.jsxs)(G.Fragment,{children:["\u0417\u0432\u0456\u0442 \u0437\u0430 \u0434\u0435\u043d\u044c ",(0,G.jsx)(k.iE3,{})]}):(0,G.jsxs)(G.Fragment,{children:["\u0417\u0432\u0456\u0442 \u0437\u0430 \u0434\u0435\u043d\u044c ",(0,G.jsx)(w.lqg,{})]})}),(0,G.jsx)(C,{onClick:function(){return y(s)},disabled:"oneDay"===r,children:"period"===r?(0,G.jsxs)(G.Fragment,{children:["\u0414\u043e\u0445\u043e\u0434\u0438 \u0437\u0430 \u043f\u0435\u0440\u0456\u043e\u0434 ",(0,G.jsx)(w.U2w,{})]}):(0,G.jsxs)(G.Fragment,{children:["\u0414\u043e\u0445\u043e\u0434\u0438 \u0437\u0430 \u043f\u0435\u0440\u0456\u043e\u0434 ",(0,G.jsx)(k.iE3,{})]})}),(0,G.jsx)(C,{disabled:"oneDay"===r,children:"period"===r?(0,G.jsxs)(G.Fragment,{children:["\u0417\u0432\u0456\u0442 \u0437\u0430 \u043f\u0435\u0440\u0456\u043e\u0434 ",(0,G.jsx)(w.lqg,{})]}):(0,G.jsxs)(G.Fragment,{children:["\u0417\u0432\u0456\u0442 \u0437\u0430 \u043f\u0435\u0440\u0456\u043e\u0434",(0,G.jsx)(k.iE3,{})]})})]}),(0,G.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:10,marginTop:35},children:[(0,G.jsx)(D,{children:"\u0417\u0430\u0440\u043f\u043b\u0430\u0442\u0430 \u0432\u0447\u0438\u0442\u0435\u043b\u0456\u0432:"}),(0,G.jsx)(C,{disabled:"period"===r,children:"period"===r?(0,G.jsx)(k.iE3,{}):(0,G.jsxs)(G.Fragment,{children:["\u0414\u0435\u043d\u044c ",(0,G.jsx)(w.dTH,{})]})}),(0,G.jsx)(C,{disabled:"oneDay"===r,children:"period"===r?(0,G.jsxs)(G.Fragment,{children:["\u041f\u0435\u0440\u0456\u043e\u0434 ",(0,G.jsx)(w.dTH,{})]}):(0,G.jsxs)(G.Fragment,{children:["\u041f\u0435\u0440\u0456\u043e\u0434 ",(0,G.jsx)(k.iE3,{})]})})]}),(0,G.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:10,marginTop:35},children:[(0,G.jsx)(D,{children:"\u0406\u043d\u0448\u0456 \u043f\u043b\u0430\u0442\u0435\u0436\u0438:"}),(0,G.jsx)(C,{onClick:function(){return Z(!0)},disabled:"period"===r,children:"period"===r?(0,G.jsxs)(G.Fragment,{children:["\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u0434\u0435\u043d\u044c ",(0,G.jsx)(k.iE3,{})]}):(0,G.jsxs)(G.Fragment,{children:["\u0414\u043e\u0434\u0430\u0439 \u0432\u0438\u0442\u0440\u0430\u0442\u0438 ",(0,G.jsx)(w.j4y,{})]})}),(0,G.jsx)(C,{htmlType:"button",disabled:"period"===r,children:"period"===r?(0,G.jsxs)(G.Fragment,{children:["\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u0434\u0435\u043d\u044c ",(0,G.jsx)(k.iE3,{})]}):(0,G.jsxs)(G.Fragment,{children:["\u0412\u043d\u0435\u0441\u0438 \u0434\u043e\u0445\u0456\u0434 ",(0,G.jsx)(w.dTH,{})]})}),(0,G.jsx)(_,{onCloseDrawerExpense:function(){Z(!1)},open:j,selectedPeriod:u})]})]})})},Q=t(7095),W=t(5453),X=(0,j.ZP)(W.Z)(c||(c=(0,v.Z)(["\n  .ant-table {\n    font-size: 14px;\n  }\n\n  .ant-table-thead > tr > th {\n    background-color: #f0f2f5 !important; /* \u041a\u043e\u043b\u0456\u0440 \u0444\u043e\u043d\u0443 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0456\u0432 */\n    font-weight: bold;\n    text-align: center;\n  }\n\n  .ant-table-tbody > tr > td {\n    text-align: center;\n  }\n\n  .ant-table-tbody > tr:hover {\n    background-color: #e6f7ff; /* \u041a\u043e\u043b\u0456\u0440 \u043f\u0440\u0438 \u043d\u0430\u0432\u0435\u0434\u0435\u043d\u043d\u0456 */\n  }\n\n  .ant-table-row[data-row-key='balance'] {\n    font-size: 16px;\n    font-weight: 400;\n    background-color: #e6f7ff !important; /* \u041a\u043e\u043b\u0456\u0440 \u0444\u043e\u043d\u0443 */\n    color: #1890ff; /* \u041a\u043e\u043b\u0456\u0440 \u0442\u0435\u043a\u0441\u0442\u0443 */\n  }\n"]))),$=j.ZP.h3(u||(u=(0,v.Z)(["\n  font-family: 'RobotoSlab';\n  font-weight: 400;\n  text-align: center;\n  margin-bottom: 10px;\n  padding: 7px 0;\n  color: #1890ff;\n  background-color: #e6f7ff;\n  border-radius: 10px;\n"]))),nn=j.ZP.span(x||(x=(0,v.Z)(["\n  color: var(--main-red);\n"]))),en=j.ZP.span(h||(h=(0,v.Z)(["\n  color: inherit;\n"]))),tn=function(n){var e=n.indicatorsCurrentMonth,t=n.loading,r=e.profit,i=void 0===r?{}:r,o=e.expense,a=void 0===o?{}:o,s=e.income,l=void 0===s?{}:s,d=e.workedIncom,c=void 0===d?0:d,u=e.previousMonthProfit,x=void 0===u?{}:u,h=[{key:"1",title:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044f",dataIndex:"category",render:function(n){return n<0?(0,G.jsx)(nn,{children:n}):(0,G.jsx)(en,{children:n})}},{key:"2",title:"\u041d\u0430 \u043f\u043e\u0447\u0430\u0442\u043e\u043a \u043f\u0435\u0440\u0456\u043e\u0434\u0443",dataIndex:"profitPrev",render:function(n){return n<0?(0,G.jsx)(nn,{children:n}):(0,G.jsx)(en,{children:n})}},{key:"3",title:"\u041e\u043f\u043b\u0430\u0447\u0435\u043d\u0456 \u043a\u043e\u0448\u0442\u0438",dataIndex:"currentIncome",render:function(n){return n<0?(0,G.jsx)(nn,{children:n}):(0,G.jsx)(en,{children:n})}},{key:"4",title:"\u041f\u043e\u0442\u043e\u0447\u043d\u0456 \u0432\u0438\u0442\u0440\u0430\u0442\u0438",dataIndex:"currentExpense",render:function(n){return n<0?(0,G.jsx)(nn,{children:n}):(0,G.jsx)(en,{children:n})}},{key:"5",title:"\u0412\u0456\u0434\u043f\u0440\u0430\u0446\u044c\u043e\u0432\u0430\u043d\u043e",dataIndex:"workedLessons",onCell:function(n,e){return 0===e?{rowSpan:p.length}:{rowSpan:0}}},{key:"6",title:"\u041d\u0430 \u043a\u0456\u043d\u0435\u0446\u044c \u043f\u0435\u0440\u0456\u043e\u0434\u0443 ",dataIndex:"profit",render:function(n){return n<0?(0,G.jsx)(nn,{children:n}):(0,G.jsx)(en,{children:n})}}],p=[{key:"cash",category:"\u0413\u043e\u0442\u0456\u0432\u043a\u0430",profitPrev:(null===x||void 0===x?void 0:x.cash)||0,profit:(null===i||void 0===i?void 0:i.kasa)||0,currentExpense:(null===a||void 0===a?void 0:a.cash)||0,currentIncome:(null===l||void 0===l?void 0:l.cash)||0,workedLessons:c},{key:"privat",category:"\u041f\u0440\u0438\u0432\u0430\u0442\u0411\u0430\u043d\u043a",profitPrev:(null===x||void 0===x?void 0:x.privatBank)||0,profit:(null===i||void 0===i?void 0:i.privatBank)||0,currentExpense:(null===a||void 0===a?void 0:a.privatBank)||0,currentIncome:(null===l||void 0===l?void 0:l.privatBank)||0,workedLessons:""},{key:"mono",category:"\u041c\u043e\u043d\u043e\u0411\u0430\u043d\u043a",profitPrev:(null===x||void 0===x?void 0:x.monoBank)||0,profit:(null===i||void 0===i?void 0:i.monoBank)||0,currentExpense:(null===a||void 0===a?void 0:a.monoBank)||0,currentIncome:(null===l||void 0===l?void 0:l.monoBank)||0,workedLessons:""},{key:"balance",category:"\u0406\u0442\u043e\u0433\u043e:",profitPrev:(null===x||void 0===x?void 0:x.amount)||0,profit:(null===i||void 0===i?void 0:i.amount)||0,currentExpense:(null===a||void 0===a?void 0:a.amount)||0,currentIncome:(null===l||void 0===l?void 0:l.amount)||0,workedLessons:""}];return(0,G.jsxs)("div",{children:[(0,G.jsx)($,{children:"\u041f\u043e\u0442\u043e\u0447\u043d\u0456 \u0446\u0438\u0444\u0440\u0438 \u043c\u0456\u0441\u044f\u0446\u044f"}),(0,G.jsx)(X,{columns:h,dataSource:p,size:"small",pagination:!1,loading:t})]})},rn=function(n){return n.expense.operetion},on=function(){var n=(0,m.useState)([]),e=(0,f.Z)(n,2),t=e[0],r=e[1],i=(0,H.v9)(rn),o=(0,m.useState)(!0),a=(0,f.Z)(o,2),s=a[0],l=a[1];return(0,m.useEffect)((function(){var n=function(){var n=(0,g.Z)((0,p.Z)().mark((function n(){var e,t,i,o,a,s;return(0,p.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=new Date,t=new Date(e.getFullYear(),e.getMonth(),1),i=new Date(e.getFullYear(),e.getMonth()+1,0),o={startDate:t.toISOString(),endDate:i.toISOString()},n.prev=4,l(!0),n.next=8,J(o);case 8:a=n.sent,s=a.totalData,r(s),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(4),console.error("\u274c Error fetching total profit:",n.t0);case 16:return n.prev=16,l(!1),n.finish(16);case 19:case"end":return n.stop()}}),n,null,[[4,13,16,19]])})));return function(){return n.apply(this,arguments)}}();n()}),[i]),(0,G.jsx)(Q.Z,{children:(0,G.jsxs)(Z,{children:[(0,G.jsx)(N,{}),(0,G.jsx)(y,{children:(0,G.jsx)(tn,{loading:s,indicatorsCurrentMonth:t})})]})})}}}]);
//# sourceMappingURL=459.05278e51.chunk.js.map