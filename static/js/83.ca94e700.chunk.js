"use strict";(self.webpackChunksunstoriy=self.webpackChunksunstoriy||[]).push([[83],{6083:function(e,n,t){t.d(n,{Z:function(){return we}});var r,i,a,o,s,l,c,d,u,p,x,h=t(4165),f=t(5861),m=t(9439),g=t(2791),v=t(168),j=t(9256),y=j.ZP.div(r||(r=(0,v.Z)(["\n  width: 100%;\n  padding: 10px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  border-radius: 8px;\n  gap: 20px;\n  margin-bottom: 8px;\n"]))),b=j.ZP.div(i||(i=(0,v.Z)(["\n  width: 100%;\n  max-width: 80%;\n  height: 100vh;\n  padding: 10px;\n"]))),k=j.ZP.div(a||(a=(0,v.Z)(["\n  border: 1px solid var(--main-yellow);\n  padding: 7px;\n  border-radius: 15px;\n  margin-bottom: 30px;\n"]))),Z=t(2648),w=t(6355),S=(t(9293),t(7199)),F=t(9126),D=t(7309),P=t(283),I=j.ZP.div(o||(o=(0,v.Z)(["\n  width: 100%;\n  max-width: 20%;\n  height: 100vh;\n  /* border: 2px solid var(--main-green); */\n  padding: 10px;\n"]))),C=(0,j.ZP)(D.ZP)(s||(s=(0,v.Z)(["\n  ","\n  background-color: var(--main-green);\n  &:hover {\n    background-color: var(--bg-main-color);\n  }\n\n  &:disabled {\n    background-color: var(--main-disabled);\n    color: var(--header-main-color);\n  }\n  & span {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    gap: 10px;\n  }\n  & svg {\n    width: 18px;\n    height: 18px;\n  }\n"])),P.G),_=t(7892),T=t.n(_),E=t(9106),O=t(5626),z=t(3827),L=t(8597),B=t(4424),U=t(2996),M=t(4086),V=t(3775),q=t(9434),H=t(4673),R=j.ZP.div(l||(l=(0,v.Z)(["\n  margin-bottom: 20px;\n  text-align: center;\n  font-family: 'RobotoSlab';\n  font-weight: 500;\n  font-size: 14px;\n"]))),Y=j.ZP.p(c||(c=(0,v.Z)(["\n  color: var(--main-green);\n"]))),A=function(e){return e.expense.operetion},G=function(e){return e.expense.expensesPeriod},J=function(e){return e.expense.isloading},W=function(e){return e.expense.zvitStatus},X=function(e){return e.expense.expenseSelected},K=t(7857),N=t(184),Q=function(e){var n=e.setOpen,t=e.selectedPeriod,r=e.open,i=e.onCloseDrawerExpense,a=(0,M.Z)(),o=(0,m.Z)(a,1)[0],s=(0,g.useState)(null),l=(0,m.Z)(s,2),c=l[0],d=l[1],u=(0,q.I0)(),p=(0,q.v9)(X);return(0,g.useEffect)((function(){p&&(n(!0),o.setFieldsValue({date:p.date?p.date.split("T")[0]:t,category:p.category||"\u0406\u043d\u0448\u0435",amount:p.amount||null,paymentForm:p.paymentForm||"cash",bank:p.bank||"",description:p.description||""}),d(p.paymentForm||"cash"))}),[p,n,o,t]),(0,N.jsx)(N.Fragment,{children:(0,N.jsx)(E.Z,{title:"\u041f\u043e\u0442\u043e\u0447\u043d\u0456 \u0432\u0438\u0442\u0440\u0430\u0442\u0438",placement:"right",width:340,onClose:i,open:r,children:(0,N.jsxs)(O.Z,{form:o,initialValues:{date:null,category:"\u0406\u043d\u0448\u0435",amount:null,paymentForm:"cash",bank:"",description:""},onFinish:function(){var e=(0,f.Z)((0,h.Z)().mark((function e(n){var r;return(0,h.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p){e.next=6;break}return r={id:p._id,values:n},e.next=4,u((0,H.E)(r)).then((0,f.Z)((0,h.Z)().mark((function e(){return(0,h.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u((0,K.T)()),i();case 2:case"end":return e.stop()}}),e)}))));case 4:e.next=10;break;case 6:return"cash"===n.paymentForm&&(n.bank=""),n.date=t,e.next=10,u((0,H.ai)(n)).then((function(){i()}));case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),children:[(0,N.jsxs)(R,{children:["\u0414\u0430\u0442\u0430 \u0432\u0438\u0442\u0440\u0430\u0442: ",(0,N.jsx)(Y,{children:t})]}),(0,N.jsx)(O.Z.Item,{label:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044f \u0432\u0438\u0442\u0440\u0430\u0442",name:"category",rules:[{required:!0,message:"\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044e"}],children:(0,N.jsx)(z.Z,{children:V.Y9.map((function(e){return(0,N.jsx)(z.Z.Option,{value:e.category,children:e.title},e.category)}))})}),(0,N.jsx)(O.Z.Item,{rules:[{required:!0,message:"\u0412\u043d\u0435\u0441\u0456\u0442\u044c \u0441\u0443\u043c\u0443 \u0432\u0438\u0442\u0440\u0430\u0442"}],label:"\u0421\u0443\u043c\u0430",name:"amount",children:(0,N.jsx)(L.Z,{style:{width:"100%"},placeholder:"\u0412\u043a\u0430\u0436\u0456\u0442\u044c \u0441\u0443\u043c\u0443"})}),(0,N.jsx)(O.Z.Item,{label:"\u0424\u043e\u0440\u043c\u0430 \u043e\u043f\u043b\u0430\u0442\u0438",name:"paymentForm",onChange:function(e){"cash"===e.target.value&&o.setFieldsValue({bank:""})},children:(0,N.jsxs)(B.ZP.Group,{onChange:function(e){d(e.target.value),"cashless"!==e.target.value&&(o.setFieldsValue({bank:void 0}),o.resetFields(["bank","sum"]))},children:[(0,N.jsx)(B.ZP,{value:"cash",children:"\u0413\u043e\u0442\u0456\u0432\u043a\u0430"}),(0,N.jsx)(B.ZP,{value:"cashless",children:"\u0411\u0435\u0437\u0433\u043e\u0442\u0456\u0432\u043a\u043e\u0432\u0430"})]})}),(0,N.jsx)(O.Z.Item,{rules:"cashless"===c&&[{required:!0,message:"\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u0431\u0430\u043d\u043a"}],label:"\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u0431\u0430\u043d\u043a",name:"bank",style:{width:250},children:(0,N.jsxs)(z.Z,{children:[(0,N.jsx)(z.Z.Option,{value:"PrivatBank",children:"\u041f\u0440\u0438\u0432\u0430\u0442\u0411\u0430\u043d\u043a"}),(0,N.jsx)(z.Z.Option,{value:"MonoBank",children:"\u041c\u043e\u043d\u043e\u0431\u0430\u043d\u043a"})]})}),(0,N.jsx)(O.Z.Item,{label:"\u041e\u043f\u0438\u0441 \u0432\u0438\u0442\u0440\u0430\u0442",name:"description",children:(0,N.jsx)(U.Z.TextArea,{placeholder:"\u0417\u0430 \u043f\u043e\u0442\u0440\u0435\u0431\u043e\u044e \u0434\u043e\u0434\u0430\u0439\u0442\u0435 \u043e\u043f\u0438\u0441",autoSize:{minRows:1,maxRows:5}})}),(0,N.jsxs)("div",{style:{width:"100%",display:"flex",alignItems:"center",flexDirection:"column",gap:8},children:[(0,N.jsx)(D.ZP,{style:{width:"100%"},type:"primary",onClick:i,htmlType:"button",children:"\u0412\u0456\u0434\u043c\u0456\u043d\u0438\u0442\u0438"}),(0,N.jsx)(D.ZP,{style:{width:"100%"},type:"primary",htmlType:"submit",children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438 \u0437\u043c\u0456\u043d\u0438"})]})]})})})},$=t(5452),ee=j.ZP.h3(d||(d=(0,v.Z)(["\n  width: 100%;\n  font-family: 'RobotoSlab';\n  font-weight: 500;\n  text-align: center;\n  margin-bottom: 10px;\n  padding: 7px 0;\n  color: var(--main-green);\n  background-color: #e6f7ff;\n  border-radius: 10px;\n"]))),ne=function(e){var n=e.title;return(0,N.jsx)(ee,{children:n})},te=t(8307),re=function(e){var n=e.dayOrePariod,t=e.selectedPeriod,r=e.selectedDateString,i=e.setDateFromTitle,a=(0,q.I0)(),o=(0,q.v9)(J),s=function(){var e=(0,f.Z)((0,h.Z)().mark((function e(t){return(0,h.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,a((0,H.IL)(t)).then((function(){return i("oneDay"===n?"\u0420\u043e\u0437\u0445\u043e\u0434\u0438 \u0437\u0430 ".concat(r[0].split("-").reverse().join("-")):"\u0420\u043e\u0437\u0445\u043e\u0434\u0438 \u0437 ".concat(r[0].split("-").reverse().join("-")," \u043f\u043e ").concat(r[1].split("-").reverse().join("-")))}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("\u274c Error fetching expenses:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(n){return e.apply(this,arguments)}}();return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(C,{onClick:function(){return s(t)},disabled:"period"===n,children:"period"===n?(0,N.jsxs)(N.Fragment,{children:["\u0420\u043e\u0437\u0445\u043e\u0434\u0438 \u0437\u0430 \u0434\u0435\u043d\u044c ",(0,N.jsx)(w.iE3,{})]}):(0,N.jsx)(N.Fragment,{children:o?(0,N.jsx)(te.yk,{height:"21",width:"50",color:"#ffffff",wrapperStyle:{display:"flex",alignItems:"center",justifyContent:"center"},visible:!0,ariaLabel:"circles-with-bar-loading"}):(0,N.jsxs)(N.Fragment,{children:["\u0420\u043e\u0437\u0445\u043e\u0434\u0438 \u0437\u0430 \u0434\u0435\u043d\u044c ",(0,N.jsx)(F.lqg,{})]})})}),(0,N.jsx)(C,{onClick:function(){return s(t)},disabled:"oneDay"===n,children:"period"===n?(0,N.jsx)(N.Fragment,{children:o?(0,N.jsx)(te.yk,{height:"21",width:"50",color:"#ffffff",wrapperStyle:{display:"flex",alignItems:"center",justifyContent:"center"},visible:!0,ariaLabel:"circles-with-bar-loading"}):(0,N.jsxs)(N.Fragment,{children:["\u0420\u043e\u0437\u0445\u043e\u0434\u0438 \u0437\u0430 \u043f\u0435\u0440\u0456\u043e\u0434 ",(0,N.jsx)(F.lqg,{})]})}):(0,N.jsxs)(N.Fragment,{children:["\u0420\u043e\u0437\u0445\u043e\u0434\u0438 \u0437\u0430 \u043f\u0435\u0440\u0456\u043e\u0434",(0,N.jsx)(w.iE3,{})]})})]})},ie=Z.Z.RangePicker,ae=function(e){var n=e.dayOrePariod,t=e.setDayOrePariod,r=e.setDateFromTitle,i=e.zvitIsLoading,a=e.selectedPeriod,o=e.setSelectedPeriod,s=e.selectedDateString,l=e.setSelectedDateString,c=(0,q.I0)(),d=T()(),u=(0,g.useState)((new Date).toISOString().split("T")[0]),p=(0,m.Z)(u,2),x=p[0],v=p[1],j=(0,g.useState)(!1),y=(0,m.Z)(j,2),b=y[0],k=y[1];var Z=function(){var e=(0,f.Z)((0,h.Z)().mark((function e(t){return(0,h.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,c((0,$.j)(t)).then((function(){return r("oneDay"===n?"\u041e\u0431\u043e\u0440\u043e\u0442\u0438 \u0437\u0430 ".concat(s[0].split("-").reverse().join("-")):"\u041e\u0431\u043e\u0440\u043e\u0442\u0438 \u0437 ".concat(s[0].split("-").reverse().join("-")," \u043f\u043e ").concat(s[1].split("-").reverse().join("-")))}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("\u274c Error fetching total profit:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(n){return e.apply(this,arguments)}}();return(0,N.jsx)(N.Fragment,{children:(0,N.jsxs)(I,{children:[(0,N.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:10},children:[(0,N.jsx)(ne,{title:"\u0424\u0456\u043d\u0430\u043d\u0441\u043e\u0432\u0456 \u043f\u043e\u043a\u0430\u0437\u043d\u0438\u043a\u0438:"}),(0,N.jsx)(ie,{defaultValue:[d,d],onChange:function(e,n){if(e&&0!==e.length){v(n[0]),l(n);var r=new Date(e[0].toDate()),i=new Date(e[1].toDate());r.setUTCHours(0,0,0,0),i.setUTCHours(23,59,59,999);var a=r.getUTCFullYear()===i.getUTCFullYear()&&r.getUTCMonth()===i.getUTCMonth()&&r.getUTCDate()===i.getUTCDate(),s={startDate:r.toISOString(),endDate:i.toISOString()};o(s),t(a?"oneDay":"period")}},locale:S.Z}),(0,N.jsx)(C,{onClick:function(){return Z(a)},disabled:"period"===n,children:"period"===n?(0,N.jsxs)(N.Fragment,{children:["\u0417\u0432\u0456\u0442 \u0437\u0430 \u0434\u0435\u043d\u044c ",(0,N.jsx)(w.iE3,{})]}):(0,N.jsx)(N.Fragment,{children:i?(0,N.jsx)(te.yk,{height:"21",width:"50",color:"#ffffff",wrapperStyle:{display:"flex",alignItems:"center",justifyContent:"center"},visible:!0,ariaLabel:"circles-with-bar-loading"}):(0,N.jsxs)(N.Fragment,{children:["\u0417\u0432\u0456\u0442 \u0437\u0430 \u0434\u0435\u043d\u044c ",(0,N.jsx)(F.lqg,{})]})})}),(0,N.jsx)(C,{onClick:function(){return Z(a)},disabled:"oneDay"===n,children:"period"===n?(0,N.jsx)(N.Fragment,{children:i?(0,N.jsx)(te.yk,{height:"21",width:"50",color:"#ffffff",wrapperStyle:{display:"flex",alignItems:"center",justifyContent:"center"},visible:!0,ariaLabel:"circles-with-bar-loading"}):(0,N.jsxs)(N.Fragment,{children:["\u0417\u0432\u0456\u0442 \u0437\u0430 \u043f\u0435\u0440\u0456\u043e\u0434 ",(0,N.jsx)(F.lqg,{})]})}):(0,N.jsxs)(N.Fragment,{children:["\u0417\u0432\u0456\u0442 \u0437\u0430 \u043f\u0435\u0440\u0456\u043e\u0434",(0,N.jsx)(w.iE3,{})]})}),(0,N.jsx)(re,{selectedPeriod:a,dayOrePariod:n,selectedDateString:s,setDateFromTitle:r})]}),(0,N.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:10,marginTop:35},children:[(0,N.jsx)(ne,{title:"\u0417\u0430\u0440\u043f\u043b\u0430\u0442\u0430 \u0432\u0447\u0438\u0442\u0435\u043b\u0456\u0432:"}),(0,N.jsx)(C,{disabled:"period"===n,children:"period"===n?(0,N.jsxs)(N.Fragment,{children:["\u0414\u0435\u043d\u044c ",(0,N.jsx)(w.iE3,{})]}):(0,N.jsxs)(N.Fragment,{children:["\u0414\u0435\u043d\u044c ",(0,N.jsx)(F.dTH,{})]})}),(0,N.jsx)(C,{disabled:"oneDay"===n,children:"period"===n?(0,N.jsxs)(N.Fragment,{children:["\u041f\u0435\u0440\u0456\u043e\u0434 ",(0,N.jsx)(F.dTH,{})]}):(0,N.jsxs)(N.Fragment,{children:["\u041f\u0435\u0440\u0456\u043e\u0434 ",(0,N.jsx)(w.iE3,{})]})})]}),(0,N.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:10,marginTop:35},children:[(0,N.jsx)(ne,{title:"\u0412\u043d\u0435\u0441\u0435\u043d\u043d\u044f \u0440\u043e\u0437\u0445\u043e\u0434\u0456\u0432"}),(0,N.jsx)(C,{onClick:function(){return k(!0)},disabled:"period"===n,children:"period"===n?(0,N.jsxs)(N.Fragment,{children:["\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u0434\u0435\u043d\u044c ",(0,N.jsx)(w.iE3,{})]}):(0,N.jsxs)(N.Fragment,{children:["\u0414\u043e\u0434\u0430\u0439 \u0432\u0438\u0442\u0440\u0430\u0442\u0438 ",(0,N.jsx)(F.j4y,{})]})}),(0,N.jsx)(C,{htmlType:"button",disabled:"period"===n,children:"period"===n?(0,N.jsxs)(N.Fragment,{children:["\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u0434\u0435\u043d\u044c ",(0,N.jsx)(w.iE3,{})]}):(0,N.jsxs)(N.Fragment,{children:["\u0412\u043d\u0435\u0441\u0438 \u0434\u043e\u0445\u0456\u0434 ",(0,N.jsx)(F.dTH,{})]})}),(0,N.jsx)(Q,{onCloseDrawerExpense:function(){k(!1)},open:b,setOpen:k,selectedPeriod:x})]})]})})},oe=t(7095),se=t(1243),le=function(){var e=(0,f.Z)((0,h.Z)().mark((function e(n){var t,r;return(0,h.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,se.Z.get("/zvit/one_month_total",{params:n});case 3:return t=e.sent,r=t.data,e.abrupt("return",r);case 8:e.prev=8,e.t0=e.catch(0),console.error("\u274c Error:",e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n){return e.apply(this,arguments)}}(),ce=t(5453),de=(0,j.ZP)(ce.Z)(u||(u=(0,v.Z)(["\n  .ant-table {\n    font-size: 14px;\n  }\n\n  .ant-table-thead > tr > th {\n    background-color: #f0f2f5 !important; /* \u041a\u043e\u043b\u0456\u0440 \u0444\u043e\u043d\u0443 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0456\u0432 */\n    font-weight: bold;\n    text-align: center;\n  }\n\n  .ant-table-tbody > tr > td {\n    text-align: center;\n  }\n\n  .ant-table-tbody > tr:hover {\n    background-color: #e6f7ff; /* \u041a\u043e\u043b\u0456\u0440 \u043f\u0440\u0438 \u043d\u0430\u0432\u0435\u0434\u0435\u043d\u043d\u0456 */\n  }\n\n  .ant-table-row[data-row-key='balance'],\n  .ant-table-row[data-row-key='total'] {\n    font-size: 16px;\n    font-weight: 400;\n    background-color: #e6f7ff !important; /* \u041a\u043e\u043b\u0456\u0440 \u0444\u043e\u043d\u0443 */\n    color: #1890ff; /* \u041a\u043e\u043b\u0456\u0440 \u0442\u0435\u043a\u0441\u0442\u0443 */\n    border-left: 10px;\n  }\n  .ant-btn-icon .anticon.anticon-delete > svg {\n    transition: all 0.05s cubic-bezier(0.645, 0.045, 0.355, 1);\n  }\n  .ant-btn-icon .anticon.anticon-delete > svg:hover {\n    fill: red;\n  }\n"]))),ue=j.ZP.span(p||(p=(0,v.Z)(["\n  color: var(--main-red);\n"]))),pe=j.ZP.span(x||(x=(0,v.Z)(["\n  color: inherit;\n"]))),xe=function(e){var n=e.indicatorsCurrentMonth,t=e.loading,r=n.profit,i=void 0===r?{}:r,a=n.expense,o=void 0===a?{}:a,s=n.income,l=void 0===s?{}:s,c=n.workedIncom,d=void 0===c?0:c,u=n.previousPeriodProfit,p=void 0===u?{}:u,x=[{key:"1",title:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044f",dataIndex:"category",render:function(e){return e<0?(0,N.jsx)(ue,{children:e}):(0,N.jsx)(pe,{children:e})}},{key:"2",title:"\u041d\u0430 \u043f\u043e\u0447\u0430\u0442\u043e\u043a \u043f\u0435\u0440\u0456\u043e\u0434\u0443",dataIndex:"profitPrev",render:function(e){return e<0?(0,N.jsx)(ue,{children:e}):(0,N.jsx)(pe,{children:e})}},{key:"3",title:"\u041e\u043f\u043b\u0430\u0447\u0435\u043d\u0456 \u043a\u043e\u0448\u0442\u0438",dataIndex:"currentIncome",render:function(e){return e<0?(0,N.jsx)(ue,{children:e}):(0,N.jsx)(pe,{children:e})}},{key:"4",title:"\u0412\u0456\u0434\u043f\u0440\u0430\u0446\u044c\u043e\u0432\u0430\u043d\u043e",dataIndex:"workedLessons",onCell:function(e,n){return 0===n?{rowSpan:h.length-1}:n===h.length-1?{rowSpan:1}:{rowSpan:0}}},{key:"5",title:"\u041f\u043e\u0442\u043e\u0447\u043d\u0456 \u0432\u0438\u0442\u0440\u0430\u0442\u0438",dataIndex:"currentExpense",render:function(e){return e<0?(0,N.jsx)(ue,{children:e}):(0,N.jsx)(pe,{children:e})}},{key:"6",title:"\u041d\u0430 \u043a\u0456\u043d\u0435\u0446\u044c \u043f\u0435\u0440\u0456\u043e\u0434\u0443 ",dataIndex:"profit",render:function(e){return e<0?(0,N.jsx)(ue,{children:e}):(0,N.jsx)(pe,{children:e})}}],h=[{key:"cash",category:"\u0413\u043e\u0442\u0456\u0432\u043a\u0430",profitPrev:(null===p||void 0===p?void 0:p.cash)||0,profit:(null===i||void 0===i?void 0:i.kasa)||0,currentExpense:(null===o||void 0===o?void 0:o.cash)||0,currentIncome:(null===l||void 0===l?void 0:l.cash)||0,workedLessons:d},{key:"privat",category:"\u041f\u0440\u0438\u0432\u0430\u0442\u0411\u0430\u043d\u043a",profitPrev:(null===p||void 0===p?void 0:p.privatBank)||0,profit:(null===i||void 0===i?void 0:i.privatBank)||0,currentExpense:(null===o||void 0===o?void 0:o.privatBank)||0,currentIncome:(null===l||void 0===l?void 0:l.privatBank)||0,workedLessons:""},{key:"mono",category:"\u041c\u043e\u043d\u043e\u0411\u0430\u043d\u043a",profitPrev:(null===p||void 0===p?void 0:p.monoBank)||0,profit:(null===i||void 0===i?void 0:i.monoBank)||0,currentExpense:(null===o||void 0===o?void 0:o.monoBank)||0,currentIncome:(null===l||void 0===l?void 0:l.monoBank)||0,workedLessons:""},{key:"balance",category:"\u0406\u0442\u043e\u0433\u043e:",profitPrev:(null===p||void 0===p?void 0:p.amount)||0,profit:(null===i||void 0===i?void 0:i.amount)||0,currentExpense:(null===o||void 0===o?void 0:o.amount)||0,currentIncome:(null===l||void 0===l?void 0:l.amount)||0,workedLessons:d}];return(0,N.jsx)(de,{columns:x,dataSource:h,size:"small",pagination:!1,loading:t})},he=function(e){return e.zvit.zvitSelectedPeriod},fe=function(e){return e.zvit.isloading},me=function(e){return e.zvit.zvitStatus},ge=t(3433),ve=t(1046),je=t(3069),ye=t(1752),be=t(8624),ke=t(2622),Ze=function(e){var n=e.expensZvitLoading,t=e.expenses,r=e.finalValues,i=(0,q.I0)(),a=[{key:"1",title:"\u0414\u0430\u0442\u0430",dataIndex:"date",filters:(0,ge.Z)(new Set(t.map((function(e){return new Date(e.date).toLocaleDateString("uk-UA")})))).map((function(e){return{text:e,value:e}})),onFilter:function(e,n){return n.date===e}},{key:"2",title:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044f",dataIndex:"category",filters:(0,ge.Z)(new Set(t.map((function(e){return e.category})))).map((function(e){return{text:e,value:e}})),onFilter:function(e,n){return n.category===e}},{key:"3",title:"\u0413\u043e\u0442\u0456\u0432\u043a\u0430",dataIndex:"amount_cash"},{key:"4",title:"\u041f\u0440\u0438\u0432\u0430\u0442\u0431\u0430\u043d\u043a",dataIndex:"amount_privat"},{key:"5",title:"\u041c\u043e\u043d\u043e\u0431\u0430\u043d\u043a",dataIndex:"amount_mono"},{key:"6",title:"\u0414\u043e\u0434\u0430\u0442\u043a\u043e\u0432\u0430 \u0456\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0456\u044f",dataIndex:"description"},{key:"7",title:"\u0414\u0456\u0457",dataIndex:"actions",render:function(e,n){return"total"!==n.key&&(0,N.jsxs)(ve.Z,{children:[(0,N.jsx)(D.ZP,{type:"primary",icon:(0,N.jsx)(ye.Z,{}),onClick:(0,f.Z)((0,h.Z)().mark((function e(){return(0,h.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i((0,H.XW)(n.key)).then();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))}),(0,N.jsx)(je.Z,{title:"\u0412\u0438\u0434\u0430\u043b\u0435\u043d\u043d\u044f",description:"\u0412\u0438 \u043d\u0430\u043c\u0430\u0433\u0430\u0454\u0442\u0435\u0441\u044c \u0432\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0446\u044e \u0441\u0442\u0440\u043e\u0447\u043a\u0443. \u041f\u0440\u043e\u0434\u043e\u0432\u0436\u0438\u0442\u0438?",icon:(0,N.jsx)(be.Z,{style:{color:"red"}}),onConfirm:function(){i((0,H.Jl)(n.key))},children:(0,N.jsx)(D.ZP,{type:"danger",icon:(0,N.jsx)(ke.Z,{})})})]})}}],o=t.map((function(e){return{key:e._id,date:new Date(e.date).toLocaleDateString("uk-UA"),category:e.category,amount_cash:"cash"===e.paymentForm?e.amount:"",amount_privat:"cashless"===e.paymentForm&&"PrivatBank"===e.bank?e.amount:"",amount_mono:"cashless"===e.paymentForm&&"MonoBank"===e.bank?e.amount:"",description:e.description}}));return r&&o.push({key:"total",date:"\u0406\u0442\u043e\u0433\u043e\u043c \u0437\u0430 \u043f\u0435\u0440\u0456\u043e\u0434:",category:"",amount_cash:r.cash,amount_privat:r.privatBank,amount_mono:r.monoBank,description:""}),(0,N.jsx)(de,{columns:a,dataSource:o,size:"small",pagination:!1,loading:n})},we=function(){var e=(0,g.useState)([]),n=(0,m.Z)(e,2),t=n[0],r=n[1],i=(0,g.useState)(!0),a=(0,m.Z)(i,2),o=a[0],s=a[1],l=(0,g.useState)(""),c=(0,m.Z)(l,2),d=c[0],u=c[1],p=(0,g.useState)(""),x=(0,m.Z)(p,2),v=x[0],j=x[1],Z=(0,g.useState)(null),w=(0,m.Z)(Z,2),S=w[0],F=w[1],D=(0,g.useState)(null),P=(0,m.Z)(D,2),I=P[0],C=P[1],_=(0,g.useState)("oneDay"),T=(0,m.Z)(_,2),E=T[0],O=T[1],z=(0,q.v9)(A),L=(0,q.v9)(he).totalData,B=(0,q.v9)(fe),U=(0,q.v9)(J),M=(0,q.v9)(G),V=M.expenses,H=M.finalValues,R=(0,q.v9)(me),Y=(0,q.v9)(W);return(0,g.useEffect)((function(){R&&u("report_for_period"),Y&&u("expenses_by_period")}),[Y,R]),(0,g.useEffect)((function(){var e=function(){var e=(0,f.Z)((0,h.Z)().mark((function e(){var n,t,i,a,o,l;return(0,h.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Date,t=new Date(n.getFullYear(),n.getMonth(),1),i=new Date(n.getFullYear(),n.getMonth()+1,0),a={startDate:t.toISOString(),endDate:i.toISOString()},e.prev=4,s(!0),u(""),e.next=9,le(a);case 9:o=e.sent,l=o.totalData,r(l),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),console.error("\u274c Error fetching total profit:",e.t0);case 17:return e.prev=17,s(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[4,14,17,20]])})));return function(){return e.apply(this,arguments)}}();e()}),[z]),(0,N.jsx)(oe.Z,{children:(0,N.jsxs)(y,{children:[(0,N.jsx)(ae,{dayOrePariod:E,setDayOrePariod:O,setDateFromTitle:j,zvitIsLoading:B,selectedPeriod:S,setSelectedPeriod:F,selectedDateString:I,setSelectedDateString:C}),(0,N.jsxs)(b,{children:[(0,N.jsxs)(k,{children:[(0,N.jsx)(ne,{title:"\u041f\u043e\u0442\u043e\u0447\u043d\u0456 \u0446\u0438\u0444\u0440\u0438 \u043c\u0456\u0441\u044f\u0446\u044f"}),(0,N.jsx)(xe,{loading:o,indicatorsCurrentMonth:t})]}),"report_for_period"===d&&L&&Object.keys(L).length>0?(0,N.jsxs)(k,{children:[(0,N.jsx)(ne,{title:"".concat(v)}),(0,N.jsx)(xe,{loading:B,indicatorsCurrentMonth:L})]}):""===d||"expenses_by_period"===d||L&&0===Object.keys(L).length?null:(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(ne,{title:"".concat(v)}),(0,N.jsx)("h4",{children:"\u0414\u0430\u043d\u0438\u0445 \u0432 \u043e\u0431\u0440\u0430\u043d\u043e\u043c\u0443 \u043f\u0435\u0440\u0456\u043e\u0434\u0456 \u043d\u0435\u043c\u0430\u0454"})]}),("expenses_by_period"===d||"expenses_by_period"===Y)&&(null===V||void 0===V?void 0:V.length)>0?(0,N.jsxs)(k,{children:[(0,N.jsx)(ne,{title:"".concat(v)}),(0,N.jsx)(Ze,{expensZvitLoading:U,expenses:V,finalValues:H})]}):""===d||"report_for_period"===d?null:(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(ne,{title:"".concat(v)}),(0,N.jsx)("h4",{children:"\u0412\u0438\u0442\u0440\u0430\u0442 \u0432 \u043e\u0431\u0440\u0430\u043d\u043e\u043c\u0443 \u043f\u0435\u0440\u0456\u043e\u0434\u0456 \u043d\u0435\u043c\u0430\u0454"})]})]})]})})}}}]);
//# sourceMappingURL=83.ca94e700.chunk.js.map